<!DOCTYPE html>
<html lang="en-US">
<head>
	<title>Installing L-Galaxies: Windows</title>
    <meta charset="UTF-8">
  
    <link rel="stylesheet" href="style.css">  
    <link rel="stylesheet" href="topnav.css">  
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

	<meta charset="UTF-8">
	<meta name="keywords" content="L-Galaxies, LGalaxies, SAM, galaxy, formation, models">
	<meta name="author" content="Rob Yates">
	<meta http-equiv="refresh" content="60">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<meta name="google-site-verification" content="HVG7Wn4SVibWVZmkOcxlBdtRj_cuxOHZfftkt2KPCkg" />

	<meta property="og:title" content="Installing L-Galaxies: Windows"/>
	<meta property="og:description" content="L-Galaxies Model of Galaxy Formation"/>
	<meta property="og:url" content="https://lgalaxiespublicrelease.github.io">
	<meta property="og:image" content="https://lgalaxiespublicrelease.github.io/front.png">

	<link rel="icon" href="./front.png">

	<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script> var BaseURLGalformod = "http://galformod.mpa-garching.mpg.de/public/LGalaxies/";</script>
	
</head>

	
<!-- <body style="font-family:lucida grande;color:#3B3B3C"> -->
<body style="font-family:Arial;color:#3B3B3C">

	<!-- top navigation panel -->
	<script src="topnav.js"></script>

	<div class="top_logo">
		<div class="my_heading1">Installing L-Galaxies: Windows</div>		
		<div id="top_logo_mask1"> </div>
		<div id="top_logo_mask2"> </div>
		<div id="top_logo_mask3"> </div>
		<div id="top_logo_mask4"> </div>
	</div> 
  
	
	
  	<div class="main_box">  

		<div class="main_box_top">	
			<p>Reference system</p>
		</div>
		
		<div class="main_box_text_box">  
			<!-- <p style="text-align:justify"><FONT size="3"> -->
			
			<!-- 
			<p style="line-height:1.5; text-align:center"><FONT size="3">
				For a basic L-Galaxies 2020 installation, (a) the code files, (b) some dark matter merger-tree files (i.e. "treefiles"), and (c) some spectrophotometric tables are needed. 
				In most cases, only a handful of treefiles are required to return a representative sub-volume containing a realistic range of galaxies (i.e. to roughly reproduce the observed stellar mass function at z=0). 
				The total storage space requirements for these basic files are:
			</FONT></p>

			<p style="line-height:1.5; text-align:center"><FONT size="3">
				<b>When run on Millennium-I:</b> <br>
				Minimum: ~2.5 GB (to run on treefile 5) <br>
				Typical: ~9.2 GB (to run on treefiles 0-9) <br>
				Maximum: ~402.2 GB (to run on the full Millennium-I, 512 treefiles) <br>
				<br>
				<b>When run on Millennium-II:</b><br>
				Minimum: ~2.0 GB (to run on a single treefile - WARNING: not a representative sub-volume) <br>
				Typical: ~6.3 GB (to run on treefiles 40-79) <br>
				Maximum: ~186.7 GB (to run on the full Millennium-II, 512 treefiles) <br>
			</FONT></p>
					
			<br>
	
			<p style="line-height:1.5; text-align:center"><FONT size="3">		
				Note that the above estimates <b>do not</b> include the space required to store newly-generated output files.
				The sizes of these can vary greatly, depending on the number of treefiles used, whether "single snapshot" or "galtree" mode is chosen, and (in the single snapshot case) which redshift is outputted.
				A rough guide to the typical size of <b>each</b> output file for the L-Galaxies 2020 "Default Model" is provided here (for a full set out output files from the whole simulation, multiply by 512):
			</FONT></p>
				
			<p style="line-height:1.5; text-align:center"><FONT size="3">
				<b>Outputs when run on Millennium-I:</b> <br>
				Single snapshot mode: ~50 MB - 1.5 GB each <br>
				Galtree mode: ~10-25 GB each <br>
				<br>
				<b>Outputs when run on Millennium-II:</b> <br>
				Single snapshot mode: ~25-350 MB each (excluding treefile 0)<br>
				Galtree mode: ~10-25 GB each
			</FONT></p>
			
			<br>
			-->
	
			<p style="line-height:1.5; text-align:center"><FONT size="3">		
				The example Windows installation described below was done on the following system: <br>
				Machine: x64-based PC laptop <br>
				Operating system: Windows 10 Eduction (Build 19044) <br>
        			Processor: Intel Core i9, 2500 MHz, 14 cores <br>
        			RAM: 32 GB <br>
        			Available storage: 943 GB
			</FONT></p>
					
		</div>	
	</div>	
	
	
	
	<div class="main_box"> 
		<div class="main_box_top">	
			<p>STEP 1: Download L-Galaxies 2020</p>
		</div>
				
		<div class="main_box_text_box">  
			<p style="line-height:1.5; text-align:center"><FONT size="3">
				<b> OPTION 1: Download as zip file:</b>
				<br>
				<ol>
					<li>Go to <a href="https://github.com/LGalaxiesPublicRelease/LGalaxies2020_PublicRepository"><FONT size="3" COLOR="3388AA"> https://github.com/LGalaxiesPublicRelease/LGalaxies2020_PublicRepository</FONT></a></li>
					<li>Click the green "Code" drop-down menu, and select "Download ZIP" [~42.2 MB]</li>
					<li>Use any un-zipping software (e.g. <a href="https://www.7-zip.org/"><FONT size="3" COLOR="3388AA"> 7-Zip</FONT></a>, or other), to extract the model into a folder called <b>/LGalaxies2020_PublicRepository-master</b>. Hereafter, this will be called the <b>"project root directory"</b></li>
					<li>Manually add an empty <b>/output</b> folder in the project root directory</li>
				</ol>
			</FONT></p>
			
			<br>
			
			<p style="line-height:1.5; text-align:center"><FONT size="3">		
				<b> OPTION 2: Download as a local Git repository:</b>
				<br>
				<!-- https://gitforwindows.org/ -->
				This option requires having <a href="https://git-scm.com/"><FONT size="3" COLOR="3388AA"> Git</FONT></a> and <a href="https://www.atlassian.com/git/tutorials/git-bash"><FONT size="3" COLOR="3388AA"> Git Bash</FONT></a> on your Windows system, and a <a href="https://github.com/"><FONT size="3" COLOR="3388AA"> GitHub</FONT></a> account.
				To download and install Git and Git Bash, follow the instructions at: <a href="https://github.com/git-guides/install-git"><FONT size="3" COLOR="3388AA"> https://github.com/git-guides/install-git</FONT></a></li>
				<ol>
					<!-- <li>Go to <a href="https://github.com/LGalaxiesPublicRelease/LGalaxies2020_PublicRepository"><FONT size="3" COLOR="3388AA"> https://github.com/LGalaxiesPublicRelease/LGalaxies2020_PublicRepository</FONT></a></li> -->
					<!-- <li>Click the green "Code" drop-down menu, and copy the URL provided under "Clone" > "HTTPS" [~42.2 MB]</li> -->
					<li>Open Git Bash</li>
					<li>Navigate to the folder into which you wish to clone the repository, and clone it, as follows:</li>
					<ul style="padding-left:40px">
						<li><em> cd [PATH TO CHOSEN FOLDER]</em></li>
						<li><em> git clone https://github.com/[USERNAME]/https://github.com/LGalaxiesPublicRelease/LGalaxies2020_PublicRepository</em></li>
					</ul>		
				</ol>		
			</FONT></p>
	
			<br>
			
			<p style="line-height:1.5; text-align:center"><FONT size="3">		
				<b> OPTION 3: Download as a local Git repository via the Eclipse IDE:</b>
				<br>
				The L-Galaxies 2020 code can also be obtained from GitHub via the <a href="https://www.eclipse.org/ide/"><FONT size="3" COLOR="3388AA"> Eclipse IDE</FONT></a>, which offers a more intuitive way of editing and debugging code, etc, with a GUI interface.
				Information on how to install Eclipe and how to synchronise it with the L-Galaxies 2020 repository are provided in STEP 6 below.
			</FONT></p>
		</div>
		
	</div>	
		
	
	
	
	<div class="main_box"> 
		<div class="main_box_top">	
			<p>STEP 2: Download spectrophotometric tables and treefiles</p>
		</div>
		
		<div class="main_box_text_box">  
			<p style="line-height:1.5; text-align:center"><FONT size="3">
				For the period of the workshop, all the files linked for download in this step are hosted on the <a href="https://www.mpcdf.mpg.de/"><FONT size="3" COLOR="3388AA"> MPCDF</FONT></a> DataShare service. In each case, the pw required to download the file is: <b>LGals2020Workshop</b>
				<br>
				<ol>
					<!-- <li>Download the standard <a href="http://galformod.mpa-garching.mpg.de/public/LGalaxies/run_model/SpecPhotTables.tar"><FONT size="3" COLOR="3388AA"> SpecPhotTables</FONT></a> [~1.6 GB]</li> -->
					<li>Download the standard <a href="https://datashare.mpcdf.mpg.de/s/0ydh4XFtYZOwolI"><FONT size="3" COLOR="3388AA"> SpecPhotTables</FONT></a> [~1.6 GB]</li>
					<li>Un-zip them into the "project root directory". This should create a folder called <b>/SpecPhotTables</b> containing the downloaded spectrophotometic tables</li>
					<li>Download the treefiles (choose one of the following options):
					<ul style="padding-left:40px">
						<li><a href="https://datashare.mpcdf.mpg.de/s/LzyTXnlONppGE5m"><FONT size="3" COLOR="3388AA"> Treefile 5</FONT></a> from Millennium-I [~803 MB]</li>
						<li><a href="https://datashare.mpcdf.mpg.de/s/MzFbUK11fkQS3DX"><FONT size="3" COLOR="3388AA"> Treefiles 0-9</FONT></a> from Millennium-I [~7.5 GB]</li>
						<!-- <li><a href="http://galformod.mpa-garching.mpg.de/public/LGalaxies/run_model/MergerTrees/MR_MergerTrees.tar"><FONT size="3" COLOR="3388AA"> Treefiles 0-9</FONT></a> from Millennium-I [~7.5 GB]</li> -->
						<!-- <li><a href="http://galformod.mpa-garching.mpg.de/public/LGalaxies/run_model/MergerTrees/MR_allMergerTrees.tar"><FONT size="3" COLOR="3388AA"> Treefiles 0-511</FONT></a> from Millennium-I [~401 GB]</li> -->
						<li><a href="https://datashare.mpcdf.mpg.de/s/LzyTXnlONppGE5m"><FONT size="3" COLOR="3388AA"> Treefile 5</FONT></a> from Millennium-I [~803 MB]</li>
						<li><a href="https://datashare.mpcdf.mpg.de/s/D4JFWzwZcjDwDb9"><FONT size="3" COLOR="3388AA"> Treefiles 40-79</FONT></a> from Millennium-II [~6.3 GB]</li>
						<!-- <li>Treefiles 0-511 treefiles from Millennium-II [~185 GB]</li> -->
					</ul>
					<li>Un-zip them into the <b>/MergerTrees</b> folder. This should create a folder called either <b>/MR</b> or <b>/MRII</b> containing the downloaded treefiles</li>
				</ol>
				
			</FONT></p>
			
		</div>	
	</div>	
	
	
	
		<div class="main_box"> 
		<div class="main_box_top">	
			<p>STEP 3: Install a Linux emulator, compiler, and C libraries</p>
		</div>
		
		<div class="main_box_text_box">  
			<p style="line-height:1.5; text-align:center"><FONT size="3">
				Most Windows distributions do not come with a C compiler by default. 
				If yours doesn't, the simplest solution is to download one via a Linux emulator. 
				Here, we provide instructions for installing the popular <a href="https://gcc.gnu.org/"><FONT size="3" COLOR="3388AA"> gcc</FONT></a> compiler via <a href="https://www.cygwin.com/"><FONT size="3" COLOR="3388AA"> Cygwin</FONT></a>. Other compilers (e.g. <a href="https://www.intel.com/content/www/us/en/developer/tools/oneapi/dpc-compiler.html#gs.gmutzi"><FONT size="3" COLOR="3388AA"> icc</FONT></a>) and Linux emulators (e.g. <a href="https://www.mingw-w64.org/"><FONT size="3" COLOR="3388AA"> MinGW</FONT></a>) are also available.
				<br>
				<ol>
					<li>Go to: <a href="https://cygwin.com/install.html"><FONT size="3" COLOR="3388AA"> https://cygwin.com/install.html</FONT></a></li>
					<li>Click <b>"setup-x86_64.exe"</b> [~1.4 MB]</li>
					<li>Once downloaded, execute setup-x86_64.exe and begin following the instructions to install to the default location: <b>C:\tools\cygwin</b>
					<li>In "Select packages", choose the "Full" view</li>
					<li>Select the following additional packages:
					<ul style="padding-left:40px">
						<li>gcc-core 11.3.0-1 [~30.7 MB]</li>
						<li>gcc-debuginfo 11.3.0-1 [~32.4 MB]</li>
						<li>gsl 2.3-2 [~58 KB]</li>
						<li>gsl-debuginfo 2.3-2 [~2.2 MB]</li>
						<li>make 4.3-1 [~503 KB]</li>
						<li>make-debuginfo 3.3-1 [~441 KB]</li>
					</ul>
					<li>Click "next"</li>
					<li>Click "next" again to complete the installation</li>
					
					<!-- 
					<p style="line-height:1.5; text-align:left"><FONT size="3">
						The steps above will install an old version of the GNU Scientific Library (GSL). 
						Therefore, we recommend you upgrade to the latest version, gsl-2.7.1, as follows (admin rights required):
					</FONT></p>
					<li>Go to: <a href="https://www.gnu.org/software/gsl/"><FONT size="3" COLOR="3388AA"> https://www.gnu.org/software/gsl/</FONT></a></li>
					<li>Click "Current stable version: GSL 2.7" [~7.2 MB]</li>
					<li>Fully un-zip this /tar.gz file into a directory of your choice, e.g. /Downloads</li>
					<li>Open a cygwin64 terminal</li>
					<li>In the cygwin64 terminal, configure and make the libraries as follows:</li>
					<ul style="padding-left:40px">
						<li><em> cd /Downloads/gsl-2.7.1</em> &ensp; [navigate to the gsl directory]</li>
						<li><em> ./configure</em> &emsp; &emsp; &emsp; &emsp; &emsp; &nbsp; [this may take a while]</li>
						<li><em> make</em> &emsp; &emsp; &emsp; &emsp; &emsp; &emsp; &emsp; [this will take even longer]</li>
						<li><em> make install</em> &emsp; &emsp; &emsp; &emsp; &ensp; [admin rights are required for this step]</li>
						<li><em> make installcheck</em> &emsp; &emsp; &ensp; [to confirm installation was successful]
					</ul>	
 					-->
				</ol>
				<br>
				N.B. We recommend you keep the setup-x86_64.exe installer on your system, as it can be executed at any later time to add/remove/update Cygwin tools.
				
			</FONT></p>
			
		</div>	
	</div>	
	
	
	
	<div class="main_box"> 
		<div class="main_box_top">	
			<p>STEP 4: Check compiler configuration</p>
		</div>
				
		<div class="main_box_text_box">  
			<p style="line-height:1.5; text-align:center"><FONT size="3">
				The L-Galaxies 2020 makefile needs to be told which C compiler to use and where the GSL libraries are stored.
				This information is provided in the <b>My_Makefile_compilers</b> file, located in the project root directory.
				By default, the SYSTYPE variable is set to "cygwin" (defined at the bottom of My_Makefile_compilers).
				This default set-up should be suitable for the basic Windows installation provided here.
				<br> <br>
				It assumes the gcc compiler, with the <em>-fcommon</em> argument added to suppress warning messages on some systems about allowing "multiple tenative definitions of a global variable in different compilation units".
				It also assumes the GSL header files and libraries are stored in their default locations when installing via cygwin, i.e. <b>C:\tools\cygwin\usr\local\include</b> and <b>C:\tools\cygwin\usr\local\lib</b>, respectively.
				If your GSL files are not stored in these locations, you will need to change the GSL_INCL and GSL_LIBS paths in My_Makefile_compilers, accordingly.
				<br> <br>
				You can also check that gcc and gsl is installed on your system by executing the following commands in a cygwin64 terminal:
				<ul style="padding-left:40px">
					<li><em> cygcheck -cd | grep gcc</em></li>
					<li><em> cygcheck -cd | grep gsl</em></li>
				</ul>
				<!-- A version of <em>gcc-core</em> and <em>gsl</em> should be found. -->
				<br>
				If you wish to set-up your own configuration, with your own compiler and GSL options, feel free to do so!
				Just remember to re-set the SYSTYPE variable at the top of My_Makefile_compilers accordingly.
			</FONT></p>
			
		</div>
		
	</div>	



	<div class="main_box"> 
		<div class="main_box_top">	
			<p>STEP 5: Compiling and running L-Galaxies 2020</p>
		</div>
		
		<div class="main_box_text_box">  
			<p style="line-height:1.5; text-align:center"><FONT size="3">
				To compile and run L-Galaxies 2020, simply do the following:
				<ol>
					<li>Open a cygwin64 terminal</li>
					<li>Navigate to the project root directory</li>
					<li>Compile the code:</li>
					<ul style="padding-left:40px">
						<li><b><em> make</em></b></li>
					</ul>	
					<li>Run the code:</li>
					<ul style="padding-left:40px">
						<li><b><em> ./L-Galaxies ./input/input_MR_W1_PLANCK_LGals2020_DM.par</em></b></li>
					</ul>
				</ol>
				
				If no other aspects of the code have been modified, then this will run L-Galaxies 2020 only on treefile 5 of Millennium-I, with only redshift 0 data outputted, using the default model baryonic parameters.
				However, various other standard set-ups can also be run instead. These are described below.		
			</FONT></p>
				
			<p style="line-height:1.5; text-align:center"><FONT size="3">
				<br>
				<b>Default vs. Modified model:</b>
				<br>
				L-Galaxies 2020 provides input files for the "default model (DM)" and "modified model (MM)" versions of the code
				(see the discussion in <a href="https://ui.adsabs.harvard.edu/abs/2021MNRAS.503.4474Y/abstract"><FONT size="3" COLOR="3388AA"> Yates+21a</FONT></a>).
				These versions each have their own input file (when running on Millennium-I):
				<ul style="padding-left:40px">
					<li>input_MR_W1_PLANCK_LGals2020_DM.par</li>
					<li>input_MR_W1_PLANCK_LGals2020_MM.par</li>
				</ul>
				To run one of these models, use its corresponding input file as the argument when running the code (see above).
			</FONT></p>
			
			<p style="line-height:1.5; text-align:center"><FONT size="3">
				<br>
				<b>Millennium-I vs. Millennium-II:</b>
				<br>
				By default, L-Galaxies 2020 will try to run on Millennium-I merger trees. To switch to Millennium-II, do the following:
				<ol>
					<li>Open the <b>My_Makefile_options</b> file (in the project root directory)</li>
					<li>Uncomment the "MRII" switch</li>
					<li>Use the default model (DM) or modified model (MM) Millennium-II input files as the argument when running the code (see above):</li>
						<ul style="padding-left:40px">
							<li>input_MRII_W1_PLANCK_LGals2020_DM.par</li>
							<li>input_MRII_W1_PLANCK_LGals2020_MM.par</li>
						</ul>
				</ol>
				
				<!--
				For example, the user can choose which N-body simulation to run on (MR and MRII), 
				and which set of baryonic parameters to consider (see the discussion on the "default model (DM)" and "modified model (MM)" in <a href="https://ui.adsabs.harvard.edu/abs/2021MNRAS.503.4474Y/abstract"><FONT size="3" COLOR="3388AA"> Yates+21a</FONT></a>) 
				Four standard "input files" files are provided (in the /inputs folder in the project root directory) to cover these four basic combinations:
				<ul style="padding-left:40px">
					<li>input_MR_W1_PLANCK_LGals2020_DM.par</li>
					<li>input_MR_W1_PLANCK_LGals2020_MM.par</li>
					<li>input_MRII_W1_PLANCK_LGals2020_DM.par</li>
					<li>input_MRII_W1_PLANCK_LGals2020_MM.par</li>
				</ul>
				You can select one of these input files by adding it as the argument when running the L-Galaxies executable (see above).
				To run on Millennium-II, you will also need to uncomment the "MRII" switch in the <b>My_Makefile_options</b> file in the project root directory.
				-->
			</FONT></p>

			<p style="line-height:1.5; text-align:center"><FONT size="3">
				<br>
				<b>Snapshot vs. Galaxytree mode:</b>
				<br>
				Snapshot mode is the default for L-Galaxies 2020, and will only output data for a user-defined set of redshifts (i.e. snapshots).
				Galaxytree mode, on the other hand, will output data from all snapshots, along with the IDs needed to link a given galaxy to its progenitors and descendents.
				<br>
				To use/modify snapshot mode:
				<ol>
					<li>Open <b>desired_output_redshifts.txt</b> in the /inputs folder</li>
					<li>Add the redshifts you wish to be outputted to the top of this file, one on each line, with an empty line at the end of your list. L-Galaxies will match these to their nearest snapshots automatically</li>
					<li>Open the <b>My_Makefile_options</b> file in the project root directory</li>
					<li>Set the NOUT parameter to equal the number of redshifts given in <b>desired_output_redshifts.txt</b> that you wish to be outputted</li>
					<li>Make sure that the GALAXYTREE switch is commented-out</li>
					<li>Compile and run L-Galaxies 2020 as described above</li>
				</ol>
				<br>
				To use galaxytree mode:
				<ol>
					<li>Open the <b>My_Makefile_options</b> file in the project root directory</li>
					<li>Uncomment the GALAXYTREE switch</li>
					<li>Compile and run L-Galaxies 2020 as described above</li>
				</ol>
				
				<!-- For simplicity, the L-Galaxies 2020 code is initially set-up to run on treefile 5 of Millennium-I in single-snapshot mode using the default model parameters. -->	
			</FONT></p>
			
		</div>	
	</div>	
	    
</body>
</html>
